<!DOCTYPE html>
<!-- This file is part of PinballY
 Copyright 2018 Michael J Roberts | GPL v3 or later | NO WARRANTY -->
<html>
<head>
   <title>PinballY Help</title>
   <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
<script src="jquery-1.12.1.js" type="text/javascript"></script>
<script src="PinballYHelp.js" type="text/javascript"></script>

<h1>mainWindow Object</h1>

<p>
   <b>mainWindow</b> is a pre-defined PinballY object representing the main user
   interface window (the "playfield" window).  This window is the event target
   for most UI-related events, and in many ways it serves as the Javascript
   object that represents the overall PinballY application.
</p>

<h2>Event target</h2>

<p>
   mainWindow is an event target object, so you can use the standard
   event methods (on(), off(), addEventListener(), etc) to add and remove
   event listeners.  See <a href="EventTarget.html">EventTarget</a>.
</p>


<h2>Events</h2>

<p>
   <b><a href="JoystickButtonEvent.html">Joystick Button Events</a></b>.  These events fire when
      the user presses or releases a joystick button.  These events represent physical joystick
      button presses, whether or not the buttons are mapped to PinballY commands.
</p>

<p>
   <b><a href="KeyEvent.html">Key Events</a></b>.  These events fire when the user presses
      or releases a keyboard key.  These events represent physical keyboard key presses,
      whether or not the keys are mapped to PinballY commands.
</p>

<p>
   <b><a href="CommandButtonEvent.html">Command Button Events</a></b>.  These events fire when
      the user presses or releases a keyboard key or joystick button that's mapped to a
      command function via the button option settings.  These represent button presses after
      being mapped from the physical input device keys to PinballY commands.  These events
      occur in addition to the physical device events.
</p>
   

<h2>Methods and properties</h2>

<p>
   The mainWindow object provides the <a href="WindowObjects.html#common">common
   window methods and properties</a>.  It also provides the additional
   items listed below.
</p>

<p>
   <a name="getUIMode"></a>
   <b>mainWindow.getUIMode():</b>  Returns an object describing the current UI
   state.  Here's a quick summary of the object's contents:
</p>
<div class="code">
{
    mode: "wheel",       // or other (see list)
    popup: "about box",  // or other (see list); present only in "popup" mode
    runMode: "running",  // or "starting", "exiting"; present only when a game is running
    capture: "single"    // or "batch"; present only when running a game in media capture mode
}
</div>
<p>
   The main state is given by the property .mode, which has one of the values
   listed below.  Depending on the mode, other properties of the object might
   be present to provide additional information.
</p>
<ul>
   <li>"wheel": in the normal game wheel UI, awaiting a command

   <li>"menu": a menu is being displayed (this refers to the graphical
   menu that PinballY displays as an overlay in the playfield window, not
   a standard Windows menu)

   <li>"popup": a popup box is being displayed.  The .popup property of
   the mode object is a string specifying the type of popup:

   <ul>
      <li>"about box": the program about box
      <li>"batch capture preview": the batch capture preview dialog
      <li>"capture delay": the capture delay selection dialog box
      <li>"media list": the media list for the current game
      <li>"message": a message box, with an error, warning, or informational alert
      <li>"flyer": a game flyer
      <li>"game info": the detailed game information box
      <li>"high scores": the high scores box
      <li>"instructions": a game instruction card
      <li>"rate game": the game rating dialog (for entering a star rating)
   </ul>

   <li>"running": a running game is in progress.  Note that "menu" mode can
   supersede this, since the user can still bring up menus while a game is
   running.  You can determine for sure whether or not a game is running by
   checking for the presence of another property, .runMode, which will be
   present if and only if a game is running.  If present,
   .runMode will be set to the string "starting" (the game has been launched
   but hasn't opened its UI window yet), "running" (the game is in progress),
   or "exiting" (PinballY has closed the game and is waiting for the process
   to exit).  In addition, if the game is running for the purposes of media
   capture, the property .capture will be present, and will be set to the
   string "single" for a single-game capture or "batch" for a batch capture.

   <li>"attract": attract mode/screen saver mode (meaning that there hasn't
   been any user input for the period of time configured in the settings to
   activate attract mode)

</ul>
      

<p>
   <a name="message"></a>
   <b>mainWindow.message(<i>message</i>, <i>style</i>):</b>  Shows a message using a
   graphical popup box in the main window.  Unlike the global alert() function,
   this doesn't pause the script until the user acknowledges the message;
   it simply shows or queues the message and returns immediately.  This
   is a good option for showing error messages or status updates, since it
   doesn't interrupt the flow of the user interface with a modal dialog.
   If <i>style</i> is provided, it's a string value specifying the
   visual style of the popup message.  This can be "info", "warning", or
   "error", to show the message with green, orange, or red trim
   (respectively), to visually signal the nature of the message.  The
   regular "info" style is used if <i>style</i> is omitted.
</p>


</body>
</html>
