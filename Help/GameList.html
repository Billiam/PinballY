<!DOCTYPE html>
<!-- This file is part of PinballY
 Copyright 2018 Michael J Roberts | GPL v3 or later | NO WARRANTY -->
<html>
<head>
   <title>PinballY Help</title>
   <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
<script src="jquery-1.12.1.js" type="text/javascript"></script>
<script src="PinballYHelp.js" type="text/javascript"></script>

<h1>gameList Object</h1>

<p>
   The gameList object represents the program's internal database of
   games.  Methods on this object provide Javascript access to the
   list of loaded games and their details.
</p>

<h2>Event target</h2>

<p>
   gameList is an event target object, so you can use the standard
   event methods (on(), off(), addEventListener(), etc) to add and remove
   event listeners.  See <a href="EventTarget.html">EventTarget</a>.
</p>
<p>
   gameList serves as the event target for the following event types:
</p>

<div class="eventTargetTOC" data-eventtarget="gameList"></div>

<h2>Properties and methods</h2>

<p>
    The gameList object has the following properties and methods:
</p>

<p>
   <a name="createFilter"></a>
   <b>gameList.createFilter(<i>desc</i>):</b>  Defines a custom filter,
   which selects games for the wheel UI according to a selection rule
   you define.  <i>desc</i> is an object describing the filter. 
   See <a href="FilterInfo.html#custom">Custom Filters</a> for 
   details and examples.
</p>

<p>
   <a name="getAllFilters"></a>
   <b>gameList.getAllFilters():</b>  Returns an array of filter IDs
   for all available filters.  Each element is a filter ID string,
   which can be passed to <a href="#getFilterInfo">gameList.getFilterInfo()</a>
   to get details on the filter.
</p>

<p>
   <a name="getAllGames"></a>
   <b>gameList.getAllGames():</b>  Returns an array consisting of the
   <a href="GameInfo.html#gameID">Game ID</a> for each of the loaded games.  The
   array is sorted in wheel display order, which is alphabetical by
   the display name of each game.  If you
   need to iterate over all games, this is more efficient than calling
   getGame() for each game.  In addition, the returned array is a
   snapshot of the game list at the time you call this function, so it
   isn't be affected by subsequent insertions, deletions, or reorderings
   of the live game list, as getGame() is.  This makes it suitable for
   making edits to the live game list in the course of the iteration,
   since edits to the live list won't affect the snapshot and thus
   won't affect the iteration.
</p>

<p>
   <a name="getAllWheelGames"></a>
   <b>gameList.getAllWheelGames():</b>  Returns an array consisting of the
   <a href="GameInfo.html#gameID">Game ID</a> for each game on the wheel - that is,
   each game selected by the currently active filter.  The 0th element
   of the array is the currently selected game, and each subsequent
   element is the ID of the next game to the right on the wheel.  Since
   the wheel is conceptually circular, the last element of the array
   is the game displayed in the wheel one position left from the
   current game.
</p>

<p>
   <a name="getCurFilter"></a>
   <b>gameList.getCurFilter():</b>  Returns the ID of the currently active
   filter.  This can be passed to gameList.getFilterInfo() to get the
   filter's details.
</p>

<p>
   <a name="getFilterInfo"></a>
   <b>gameList.getFilterInfo(<i>id</i>):</b>  Returns a <a href="FilterInfo.html">FilterInfo</a>
   object describing the filter identified by <i>id</i>.  The <i>id</i> value is a string
   with the filter ID, as provided in <a href="FilterSelectEvent.html"><b>filterselect</b></a>
   events.  See <a href="FilterInfo.html">FilterInfo</a> for details.
</p>

<p>
   <a name="getGameInfo"></a>
   <b>gameList.getGameInfo(<i>id</i>):</b>  Returns an object containing
   information on the specified game.  <i>id</i> is the program's internal ID
   for the game, which is an arbitrary integer assigned when the game database
   is loaded.  This is the same ID value that appears in
   <a href="GameSelectEvent.html"><b>gameselect</b></a> events to identify
   a newly selected game.  The returned object contains most of PinballY's
   information on the game; see <a href="#gameInfo">Retrieving information
   on a game</a> below for details.  If the game ID is invalid, the function
   returns null.
</p>

<p>
   <a name="getGame"></a>
   <b>gameList.getGame(<i>n</i>):</b>  Returns the <a href="GameInfo.html#gameID">Game ID</a>
   of the <i>n</i>th game.  <i>n</i> is an index into the list of all loaded
   games, ranging from 0 to the number of games in the list minus 1.  You can
   get the total number of games from getGameCount().
</p>

<p>
   <a name="getGameCount"></a>
   <b>gameList.getGameCount():</b>  Returns the number of games in the list of
   all loaded games.  You can retrieve individual games via getGame(<i>n</i>),
   where <i>n</i> ranges from 0 to the game count minus 1.
</p>

<p>
   <a name="getWheelGame"></a>
   <b>gameList.getWheelGame(<i>n</i>):</b>  Returns the <a href="GameInfo.html#gameID">Game ID</a>
   of the game at offset <i>n</i> from the selected game in the wheel.  The
   currently selected game is at offset 0, so gameList.getWheelGame(0) returns
   the ID of the selected game.  Offset 1 is the next game to the right of the
   current game, 2 is the next game to the right of that, and so on; -1 is
   the game to the left of the current game, -2 is the game to the left of
   that, and so on.  Since the wheel is conceptually a circle, offset <i>N</i>
   comes back to the currently selected game when <i>N</i> is the number
   of games showing on the wheel (and by the same token, offset <i>-N</i>,
   2<i>N</i>, <i>-2N</i>, etc all wrap back to the current game).
</p>

<p>
   <a name="getWheelCount"></a>
   <b>gameList.getWheelCount():</b>  Returns the number of games currently
   shown in the "wheel" UI.  This includes all games selected by the current
   filter.
</p>

<p>
   <a name="setCurFilter"></a>
   <b>gameList.setCurFilter(<i>id</i>):</b>  Changes the active filter
   for the wheel UI.  <i>id</i> can a string with the ID of the desired
   filter, or a number in the range command.FilterFirst to command.FilterLast
   (see <a href="Commands.html">Commands</a>), identifying the filter by
   its associated menu command.  The <a href="FilterSelectEvent.html"><b>filterselect</b></a>
   event is <b>not</b> fired when you change the filter with this function.
</p>
   


<a name="gameInfo"></a>
<h2>Retrieving information on a game</h2>

<p>
   Given a game ID, you can obtain the detailed game information
   that the system keeps internally by calling
   <a href="#getGameInfo">gameList.getGameInfo(<i>id</i>)</a>.
   For example, here's how you could retrieve the title of the
   newly selected game each time the wheel selection changes, and
   store it in a global variable:
</p>
<div class="code">
let curTitle;
gameList.on("gameselect", ev =&gt; {
    if (ev.id)
       curTitle = gameList.getGameInfo(ev.id).title;
});
</div>

<p>
   The return value from gameList.getGameInfo() is a <a href="GameInfo.html">GameInfo</a>
   object containing the game's details.  See <a href="GameInfo.html">GameInfo</a>
   for more information.
</p>


</body>
</html>
